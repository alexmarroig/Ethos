openapi: 3.0.3
info:
  title: ETHOS Control Plane API
  version: 1.1.0
servers:
  - url: http://localhost:8788
paths:
  /v1/auth/invite: { post: { summary: Invite user (admin only) } }
  /v1/auth/accept-invite: { post: { summary: Accept invite token } }
  /v1/auth/login: { post: { summary: Login } }
  /v1/auth/logout: { post: { summary: Logout } }
  /v1/me:
    get: { summary: Get current user }
    patch: { summary: Update current user }

  /v1/billing/checkout-session: { post: { summary: Stripe checkout session (subscription) } }
  /v1/billing/portal-session: { post: { summary: Stripe billing portal session } }
  /v1/billing/subscription: { get: { summary: Current subscription status } }
  /v1/webhooks/stripe: { post: { summary: Stripe webhook receiver (Stripe-Signature required) } }

  /v1/entitlements: { get: { summary: Entitlements snapshot + grace status } }
  /v1/telemetry: { post: { summary: Sanitized telemetry ingest } }

  /v1/admin/users: { get: { summary: Admin users list (sanitized) } }
  /v1/admin/users/{id}: { patch: { summary: Admin patch user role/status } }
  /v1/admin/metrics/overview: { get: { summary: Admin overview metrics } }
  /v1/admin/metrics/user-usage: { get: { summary: Admin user usage counts/minutes } }
  /v1/admin/metrics/errors: { get: { summary: Admin errors grouped by code/version } }
  /v1/admin/audit: { get: { summary: Admin audit trail (sanitized) } }
